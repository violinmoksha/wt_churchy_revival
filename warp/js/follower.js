/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

!function(t){var e=function(){};t.extend(e.prototype,{name:"follower",options:{activeClass:"active",hoveredClass:"isfollowing",slider:{"class":"fancyfollower",html:"<div></div>"},effect:{transition:"easeOutBack",duration:200}},initialize:function(e,i){this.options=t.extend({},this.options,i);var s=this;e.css("position","relative"),this.current=null,t(e.children()).each(function(){t(this).bind({mouseenter:function(e){s.slider.stop(),s.slideTo(t(this),"enter")},mouseleave:function(t){s.slideTo(s.current,"leave")},click:function(e){s.setCurrent(t(this),!0)}}).css({position:"relative"})});var n=e.children()[0].tagName.toLowerCase();e.append(t("<"+n+">").addClass(this.options.slider["class"]).html(this.options.slider.html)),this.slider=e.find(">"+n+":last"),this.setCurrent(e.find("."+this.options.activeClass+":first")),this.current&&(this.startElement=this.current)},setCurrent:function(t,e){if(t.length&&!this.current){var i=t.position();this.slider.css({left:i.left,width:t.width(),height:t.height(),top:i.top,opacity:1}),e?this.slider.fadeIn():this.slider.show()}return this.current&&this.current.removeClass(this.options.hoveredClass),t.length&&(this.current=t.addClass(this.options.hoveredClass)),this},slideTo:function(t,e){if(this.current||this.setCurrent(t),this.slider.stop().animate({left:t.position().left+"px",width:t.outerWidth()+"px",top:t.position().top+"px",height:t.outerHeight()+"px"},this.options.effect.duration,this.options.effect.transition),this.isHovered="leave"==e?!1:!0,"leave"!=e||this.startElement)this.slider.css("opacity",1).fadeIn();else{var i=this;window.setTimeout(function(){i.isHovered||(i.slider.fadeOut(),i.current=!1)},200)}return this}}),t.fn[e.prototype.name]=function(){var i=arguments,s=i[0]?i[0]:null;return this.each(function(){var n=t(this);if(e.prototype[s]&&n.data(e.prototype.name)&&"initialize"!=s)n.data(e.prototype.name)[s].apply(n.data(e.prototype.name),Array.prototype.slice.call(i,1));else if(!s||t.isPlainObject(s)){var o=new e;e.prototype.initialize&&o.initialize.apply(o,t.merge([n],i)),n.data(e.prototype.name,o)}else t.error("Method "+s+" does not exist on jQuery."+e.name)})}}(jQuery);